import{W as H,B as ee,X as Z,Y as O,h as b,Z as ae,f as re,g as B,I as fe,_ as ne,$ as le,a0 as W,a1 as z,a2 as D,a3 as ie,a4 as se,a5 as X,a6 as M,a7 as p,a8 as q,a9 as ue,J,m as oe,aa as y,ab as ve,ac as de,ad as te,ae as ce,af as $,ag as G,ah as F,ai as _e,aj as he,ak as ge,al as Ee,am as me,an as K,ao as P,ap as pe,d as Se,aq as be}from"./BPfIUn8A.js";function Ne(e,r){return r}function Te(e,r,f){for(var v=[],c=r.length,l,u=r.length,d=0;d<c;d++){let E=r[d];G(E,()=>{if(l){if(l.pending.delete(E),l.done.add(E),l.pending.size===0){var t=e.outrogroups;Y(y(l.done)),t.delete(l),t.size===0&&(e.outrogroups=null)}}else u-=1},!1)}if(u===0){var n=v.length===0&&f!==null;if(n){var o=f,i=o.parentNode;Ee(i),i.append(o),e.items.clear()}Y(r,!n)}else l={pending:new Set(r),done:new Set},(e.outrogroups??=new Set).add(l)}function Y(e,r=!0){for(var f=0;f<e.length;f++)me(e[f],r)}var U;function ke(e,r,f,v,c,l=null){var u=e,d=new Map,n=(r&Z)!==0;if(n){var o=e;u=b?O(ae(o)):o.appendChild(H())}b&&re();var i=null,E=fe(()=>{var s=f();return ve(s)?s:s==null?[]:y(s)}),t,h=!0;function T(){a.fallback=i,Ae(a,t,u,r,v),i!==null&&(t.length===0?(i.f&p)===0?$(i):(i.f^=p,R(i,null,u)):G(i,()=>{i=null}))}var C=ee(()=>{t=B(E);var s=t.length;let N=!1;if(b){var k=ne(u)===le;k!==(s===0)&&(u=W(),O(u),z(!1),N=!0)}for(var m=new Set,A=M,w=ue(),g=0;g<s;g+=1){b&&D.nodeType===ie&&D.data===se&&(u=D,N=!0,z(!1));var I=t[g],x=v(I,g),_=h?null:d.get(x);_?(_.v&&X(_.v,I),_.i&&X(_.i,g),w&&A.skipped_effects.delete(_.e)):(_=Ie(d,h?u:U??=H(),I,x,g,c,r,f),h||(_.e.f|=p),d.set(x,_)),m.add(x)}if(s===0&&l&&!i&&(h?i=q(()=>l(u)):(i=q(()=>l(U??=H())),i.f|=p)),b&&s>0&&O(W()),!h)if(w){for(const[Q,j]of d)m.has(Q)||A.skipped_effects.add(j.e);A.oncommit(T),A.ondiscard(()=>{})}else T();N&&z(!0),B(E)}),a={effect:C,items:d,outrogroups:null,fallback:i};h=!1,b&&(u=D)}function Ae(e,r,f,v,c){var l=(v&ge)!==0,u=r.length,d=e.items,n=e.effect.first,o,i=null,E,t=[],h=[],T,C,a,s;if(l)for(s=0;s<u;s+=1)T=r[s],C=c(T,s),a=d.get(C).e,(a.f&p)===0&&(a.nodes?.a?.measure(),(E??=new Set).add(a));for(s=0;s<u;s+=1){if(T=r[s],C=c(T,s),a=d.get(C).e,e.outrogroups!==null)for(const _ of e.outrogroups)_.pending.delete(a),_.done.delete(a);if((a.f&p)!==0)if(a.f^=p,a===n)R(a,null,f);else{var N=i?i.next:n;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),S(e,i,a),S(e,a,N),R(a,N,f),i=a,t=[],h=[],n=i.next;continue}if((a.f&F)!==0&&($(a),l&&(a.nodes?.a?.unfix(),(E??=new Set).delete(a))),a!==n){if(o!==void 0&&o.has(a)){if(t.length<h.length){var k=h[0],m;i=k.prev;var A=t[0],w=t[t.length-1];for(m=0;m<t.length;m+=1)R(t[m],k,f);for(m=0;m<h.length;m+=1)o.delete(h[m]);S(e,A.prev,w.next),S(e,i,A),S(e,w,k),n=k,i=w,s-=1,t=[],h=[]}else o.delete(a),R(a,n,f),S(e,a.prev,a.next),S(e,a,i===null?e.effect.first:i.next),S(e,i,a),i=a;continue}for(t=[],h=[];n!==null&&n!==a;)(o??=new Set).add(n),h.push(n),n=n.next;if(n===null)continue}(a.f&p)===0&&t.push(a),i=a,n=a.next}if(e.outrogroups!==null){for(const _ of e.outrogroups)_.pending.size===0&&(Y(y(_.done)),e.outrogroups?.delete(_));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||o!==void 0){var g=[];if(o!==void 0)for(a of o)(a.f&F)===0&&g.push(a);for(;n!==null;)(n.f&F)===0&&n!==e.fallback&&g.push(n),n=n.next;var I=g.length;if(I>0){var x=(v&Z)!==0&&u===0?f:null;if(l){for(s=0;s<I;s+=1)g[s].nodes?.a?.measure();for(s=0;s<I;s+=1)g[s].nodes?.a?.fix()}Te(e,g,x)}}l&&_e(()=>{if(E!==void 0)for(a of E)a.nodes?.a?.apply()})}function Ie(e,r,f,v,c,l,u,d){var n=(u&de)!==0?(u&te)===0?oe(f,!1,!1):J(f):null,o=(u&ce)!==0?J(c):null;return{v:n,i:o,e:q(()=>(l(r,n??f,o??c,d),()=>{e.delete(v)}))}}function R(e,r,f){if(e.nodes)for(var v=e.nodes.start,c=e.nodes.end,l=r&&(r.f&p)===0?r.nodes.start:f;v!==null;){var u=he(v);if(l.before(v),v===c)return;v=u}}function S(e,r,f){r===null?e.effect.first=f:r.next=f,f===null?e.effect.last=r:f.prev=r}function we(e,r,f=r){var v=new WeakSet;K(e,"input",async c=>{var l=c?e.defaultValue:e.value;if(l=L(e)?V(l):l,f(l),M!==null&&v.add(M),await pe(),l!==(l=r())){var u=e.selectionStart,d=e.selectionEnd,n=e.value.length;if(e.value=l??"",d!==null){var o=e.value.length;u===d&&d===n&&o>n?(e.selectionStart=o,e.selectionEnd=o):(e.selectionStart=u,e.selectionEnd=Math.min(d,o))}}}),(b&&e.defaultValue!==e.value||Se(r)==null&&e.value)&&(f(L(e)?V(e.value):e.value),M!==null&&v.add(M)),P(()=>{var c=r();if(e===document.activeElement){var l=be??M;if(v.has(l))return}L(e)&&c===V(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function L(e){var r=e.type;return r==="number"||r==="range"}function V(e){return e===""?null:+e}function xe(e,r,f=r){K(e,"change",()=>{f(e.files)}),b&&e.files&&f(e.files),P(()=>{e.files=r()})}export{xe as a,we as b,ke as e,Ne as i};
